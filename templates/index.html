<!DOCTYPE html>
<html>
<head>
  <title>Paint Home - Wall Scanner</title>
  <style>
    video, canvas { width: 300px; height: 225px; border-radius: 12px; }
    #result { margin-top: 20px; font-size: 18px; font-weight: bold; }
  </style>
</head>
<body>
  <h2>Paint Home - Wall Scanner</h2>
  <video id="video" autoplay></video><br>
  <button onclick="capture()">Capture & Suggest Color</button>
  <canvas id="canvas" style="display:none;"></canvas>
  <div id="result">Suggested Color: <span id="color"></span></div>

  <script>
    const video = document.getElementById('video');
    navigator.mediaDevices.getUserMedia({ video: true }).then(stream => {
      video.srcObject = stream;
    });

    function capture() {
      const canvas = document.getElementById('canvas');
      canvas.getContext('2d').drawImage(video, 0, 0, canvas.width, canvas.height);
      canvas.toBlob(blob => {
        const formData = new FormData();
        formData.append('image', blob, 'wall.jpg');

        fetch('/color-suggestion', {
          method: 'POST',
          body: formData
        })
        .then(res => res.json())
        .then(data => {
          document.getElementById('color').innerText = data.suggested_color;
          document.getElementById('result').style.color = data.suggested_color;
        });
      });
    }
  </script>
</body>
</html>
